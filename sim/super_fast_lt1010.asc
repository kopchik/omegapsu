Version 4
SHEET 1 8456 1444
WIRE 96 -144 96 -160
WIRE -240 -112 -384 -112
WIRE -208 -112 -240 -112
WIRE -112 -112 -128 -112
WIRE 224 -112 224 -160
WIRE -240 -48 -240 -112
WIRE 352 -48 352 -96
WIRE 96 -32 96 -64
WIRE 176 -32 96 -32
WIRE 224 0 224 -16
WIRE 288 0 224 0
WIRE -240 80 -240 32
WIRE 96 80 96 -32
WIRE -384 192 -384 -112
WIRE -336 192 -384 192
WIRE -240 208 -240 144
WIRE -240 208 -272 208
WIRE -160 208 -240 208
WIRE 96 208 96 160
WIRE 96 208 -80 208
WIRE 352 208 352 48
WIRE 448 208 352 208
WIRE 560 208 448 208
WIRE 592 208 560 208
WIRE 736 208 672 208
WIRE 816 208 736 208
WIRE 976 208 816 208
WIRE 1008 208 976 208
WIRE -336 224 -384 224
WIRE 352 240 352 208
WIRE 560 272 560 208
WIRE 288 288 208 288
WIRE 976 288 976 208
WIRE 96 304 96 208
WIRE 160 304 96 304
WIRE 1824 304 1824 256
WIRE 1200 336 1200 272
WIRE -544 368 -544 336
WIRE 208 432 208 384
WIRE 1824 432 1824 384
WIRE 352 448 352 336
WIRE 736 448 736 208
WIRE -704 464 -704 448
WIRE -704 464 -800 464
WIRE -704 480 -704 464
WIRE 976 512 976 352
WIRE -800 528 -800 464
WIRE 160 544 96 544
WIRE 304 544 224 544
WIRE 320 544 304 544
WIRE 448 544 448 288
WIRE 448 544 400 544
WIRE 1200 576 1200 416
WIRE 1824 576 1824 512
WIRE 112 608 -144 608
WIRE 192 608 176 608
WIRE 304 608 304 544
WIRE 304 608 272 608
WIRE 816 624 816 208
WIRE 208 688 208 672
WIRE 304 720 304 608
WIRE 304 720 256 720
WIRE -144 736 -144 608
WIRE -48 736 -144 736
WIRE 96 736 96 544
WIRE 96 736 16 736
WIRE 144 736 96 736
WIRE 736 752 736 528
WIRE 736 752 256 752
WIRE 1824 784 1824 656
WIRE 64 912 -32 912
WIRE 208 912 128 912
WIRE 1184 944 1184 784
WIRE 0 992 -256 992
WIRE 96 992 64 992
WIRE 208 992 208 912
WIRE 208 992 176 992
WIRE 208 1104 208 992
WIRE 208 1104 128 1104
WIRE 304 1104 208 1104
WIRE 448 1104 448 544
WIRE 448 1104 384 1104
WIRE -256 1120 -256 992
WIRE -160 1120 -256 1120
WIRE -32 1120 -32 912
WIRE -32 1120 -96 1120
WIRE 16 1120 -32 1120
WIRE 816 1136 816 704
WIRE 816 1136 128 1136
WIRE -384 1168 -384 224
WIRE 80 1184 80 1168
WIRE -384 1280 -384 1248
FLAG -800 528 0
FLAG -704 368 V+
FLAG -704 560 V-
FLAG 240 800 V+
FLAG -304 176 V+
FLAG 240 672 V-
FLAG -304 240 V-
FLAG 1008 208 out2
FLAG 1200 576 0
FLAG 976 512 0
FLAG 112 1056 V+
FLAG 112 1184 V-
FLAG 1824 784 0
FLAG -384 1360 0
FLAG 1392 528 out2
FLAG 560 352 V-
FLAG -112 -112 out2
FLAG 352 448 0
FLAG 208 432 V-
FLAG -544 336 Vpower
FLAG -544 448 0
FLAG 352 -96 Vpower
FLAG 224 -160 V+
FLAG 80 1184 0
FLAG 208 672 0
FLAG 96 -160 V+
FLAG 1184 944 0
FLAG 1392 608 0
SYMBOL voltage -704 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL voltage -704 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 15
SYMBOL cap -256 80 R0
SYMATTR InstName C5
SYMATTR Value 2n
SYMBOL res -112 -128 R90
WINDOW 0 -16 53 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res -368 1264 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL diode 160 560 R270
WINDOW 0 35 -2 VTop 2
WINDOW 3 57 92 VBottom 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL schottky -48 752 R270
WINDOW 3 0 32 VBottom 2
WINDOW 0 32 32 VTop 2
SYMATTR Value 1N5817
SYMATTR InstName D6
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 112 624 R270
WINDOW 3 0 32 VBottom 2
WINDOW 0 32 32 VTop 2
SYMATTR Value 0p
SYMATTR InstName C6
SYMBOL res 576 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value 200
SYMBOL res 416 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 2k
SYMBOL voltage 736 544 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 57 Left 2
SYMATTR Value 0.5
SYMATTR InstName V7
SYMBOL res 1184 320 R0
SYMATTR InstName R22
SYMATTR Value R=if(time>1m& time<3m,1MEG,0.5)
SYMBOL cap 960 288 R0
SYMATTR InstName C4
SYMATTR Value 0.1µ
SYMATTR SpiceLine Rser=0.1
SYMBOL voltage 816 608 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 57 Left 2
SYMATTR Value 0.1
SYMATTR InstName V6
SYMBOL voltage 1824 416 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value PWL(0 0 +1m 0 +100n 1m +2m 1m +100n 100m +2m 100m +100n 1000m +2m 1000m +100n 100m +2m 100m +100n 1m +2m 1m)
SYMBOL res 1808 288 R0
SYMATTR InstName R10
SYMATTR Value 1
SYMBOL res 400 1088 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 2k
SYMBOL voltage -384 1264 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 1
SYMBOL cap 64 976 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 0p
SYMBOL res 192 976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1
SYMBOL OpAmps\\LT1468 -304 144 R0
SYMATTR InstName U2
SYMBOL res 288 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 35 64 VTop 2
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL diode 128 896 R90
WINDOW 0 -10 67 VBottom 2
WINDOW 3 -39 2 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL schottky -96 1104 R90
WINDOW 3 32 32 VTop 2
WINDOW 0 0 32 VBottom 2
SYMATTR Value 1N5817
SYMATTR InstName D2
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -64 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL voltage 1824 560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL current 560 272 R0
WINDOW 3 24 136 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 108 Left 2
SYMATTR Value 10m
SYMATTR SpiceLine load
SYMATTR InstName I1
SYMBOL res 432 192 R0
SYMATTR InstName R3
SYMATTR Value 1m
SYMBOL npn 288 -48 R0
SYMATTR InstName Q1
SYMATTR Value ZTX1048A
SYMBOL nmos 176 -112 R0
SYMATTR InstName M1
SYMATTR Value BSS123
SYMBOL pnp 288 336 M180
WINDOW 0 61 36 Left 2
WINDOW 3 36 -7 Left 2
SYMATTR InstName Q2
SYMATTR Value D45H11
SYMBOL pmos 160 384 M180
SYMATTR InstName M2
SYMATTR Value BSS84
SYMBOL voltage 96 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 3.5
SYMBOL voltage -544 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value 15
SYMBOL res -256 -64 R0
SYMATTR InstName R5
SYMATTR Value 0
SYMBOL OpAmps\\LT6018 208 736 R180
SYMATTR InstName U1
SYMBOL OpAmps\\LT6018 80 1120 M0
SYMATTR InstName U3
SYMBOL current 96 -144 R0
WINDOW 0 -50 -1 Left 2
WINDOW 3 -78 64 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I2
SYMATTR Value 0.1m
SYMBOL res 1168 688 R0
SYMATTR InstName R6
SYMATTR Value R=if(time>1m& time<3m,1MEG,20)
SYMBOL current 1392 528 R0
WINDOW 3 24 136 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 108 Left 2
SYMATTR Value PULSE(10u 1m 1m 1u 1u 2m)
SYMATTR SpiceLine load
SYMATTR InstName I3
TEXT -824 648 Left 2 !.tran 4m
TEXT 768 776 VLeft 2 ;Max sink current
TEXT 624 552 Left 2 ;max source current
TEXT -376 1264 Left 2 ;Vset
TEXT 592 128 Left 2 ;SHUNT
TEXT 1192 192 Left 4 ;LOAD
TEXT 928 392 VLeft 2 ;CAP 0p-100u
TEXT 376 624 Left 4 ;CC control
TEXT 264 960 Left 4 ;sink control
TEXT 1704 184 Left 4 ;test sinking
TEXT -856 688 Left 2 !;.step param CAP list 700p 1n 1.3n
TEXT -864 736 Left 2 !;.step param RES list 500 1k 2k
TEXT -856 792 Left 2 !;.step param IBIAS list 0.1m 0.5m 1m
TEXT -864 872 Left 2 !;.step param VBIAS list 2.5 3 3.5 4 4.5
TEXT -864 920 Left 2 !;.step param PRELOAD list 10u 1m 10m 20m 50m
