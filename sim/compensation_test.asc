Version 4
SHEET 1 880 680
WIRE 112 0 -16 0
WIRE 400 0 208 0
WIRE 592 0 400 0
WIRE 592 64 592 0
WIRE -16 128 -16 80
WIRE -256 160 -256 128
WIRE -256 160 -320 160
WIRE 400 160 400 0
WIRE 400 160 336 160
WIRE -320 176 -320 160
WIRE -256 176 -256 160
WIRE 160 176 160 64
WIRE 192 176 160 176
WIRE 272 176 256 176
WIRE 592 176 592 144
WIRE 400 192 336 192
WIRE 160 208 160 176
WIRE 400 288 400 272
WIRE 160 352 160 288
FLAG -16 128 0
FLAG 592 176 0
FLAG -320 176 0
FLAG -256 48 V+
IOPIN -256 48 Out
FLAG 304 144 V+
IOPIN 304 144 Out
FLAG -256 256 V-
IOPIN -256 256 Out
FLAG 304 208 V-
IOPIN 304 208 Out
FLAG 400 288 0
FLAG 160 352 V+
IOPIN 160 352 Out
SYMBOL Opamps\\LT1097 304 112 M0
WINDOW 0 54 18 Left 2
SYMATTR InstName U1
SYMBOL npn3 112 64 R270
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL voltage -256 32 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=2
SYMATTR InstName V1
SYMATTR Value 20
SYMBOL voltage -256 160 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=2
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -16 -16 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.5
SYMATTR InstName V3
SYMATTR Value 7
SYMBOL res 576 48 R0
SYMATTR InstName R1
SYMATTR Value 3
SYMBOL voltage 400 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=1k
SYMATTR InstName V4
SYMATTR Value AC 1.
SYMBOL current 160 288 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 10m
SYMBOL diode 192 192 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N914
TEXT -344 344 Left 2 !;tran 0.1
TEXT -336 376 Left 2 !.ac oct 20 1 2MEG
