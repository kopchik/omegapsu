Version 4
SHEET 1 4128 1332
WIRE 1392 -32 1184 -32
WIRE 1488 -32 1392 -32
WIRE 1792 -32 1568 -32
WIRE 176 80 0 80
WIRE 240 80 176 80
WIRE 512 80 320 80
WIRE 1392 80 1392 -32
WIRE 1600 80 1600 32
WIRE 176 112 176 80
WIRE 1536 128 1472 128
WIRE 0 192 0 80
WIRE 48 192 0 192
WIRE 1184 192 1184 -32
WIRE 1248 192 1184 192
WIRE 176 208 176 176
WIRE 176 208 112 208
WIRE 256 208 176 208
WIRE 352 208 320 208
WIRE 400 208 352 208
WIRE 512 208 512 80
WIRE 512 208 480 208
WIRE 688 208 512 208
WIRE 800 208 688 208
WIRE 1392 208 1392 144
WIRE 1392 208 1312 208
WIRE 1472 208 1472 128
WIRE 1472 208 1392 208
WIRE 1488 208 1472 208
WIRE 1600 208 1600 176
WIRE 1600 208 1568 208
WIRE 1664 208 1600 208
WIRE 1712 208 1664 208
WIRE 1760 208 1712 208
WIRE 1888 208 1840 208
WIRE 1936 208 1888 208
WIRE 2096 208 1936 208
WIRE 2192 208 1792 -32
WIRE 2192 208 2096 208
WIRE 2240 208 2192 208
WIRE 48 224 -16 224
WIRE 1248 224 1184 224
WIRE 352 240 352 208
WIRE 512 240 512 208
WIRE 1600 240 1600 208
WIRE 2192 272 2192 208
WIRE 688 288 688 208
WIRE 1472 288 1472 208
WIRE 1536 288 1472 288
WIRE 2096 288 2096 208
WIRE 512 336 512 320
WIRE 512 336 320 336
WIRE 1888 336 1888 208
WIRE -16 352 -16 224
WIRE 16 352 -16 352
WIRE 96 352 80 352
WIRE 192 352 96 352
WIRE 256 352 192 352
WIRE 2768 352 2768 336
WIRE 352 368 352 320
WIRE 352 368 320 368
WIRE 96 400 96 352
WIRE 192 400 192 352
WIRE 512 400 512 336
WIRE 1600 400 1600 336
WIRE -16 432 -16 352
WIRE 688 448 688 368
WIRE 1664 448 1664 208
WIRE -384 464 -384 448
WIRE -384 464 -480 464
WIRE 192 464 96 464
WIRE 352 464 352 368
WIRE 352 464 192 464
WIRE -384 480 -384 464
WIRE 352 496 352 464
WIRE 512 512 512 480
WIRE 2096 512 2096 352
WIRE 2192 512 2192 352
WIRE -480 528 -480 464
WIRE -16 528 -16 512
WIRE 1888 560 1888 416
WIRE 1888 560 1568 560
WIRE 1184 576 1184 224
WIRE 1232 576 1184 576
WIRE 1344 576 1296 576
WIRE 1440 576 1344 576
WIRE 1504 576 1440 576
WIRE 1440 592 1440 576
WIRE 1664 592 1664 528
WIRE 1664 592 1568 592
WIRE 1344 624 1344 576
WIRE 1936 624 1936 208
WIRE 1440 688 1440 656
WIRE 1440 688 1344 688
WIRE 1664 688 1664 592
WIRE 1664 688 1440 688
WIRE 1712 768 1712 208
WIRE 1744 896 1568 896
WIRE 1824 896 1744 896
WIRE 1936 896 1936 704
WIRE 1936 896 1904 896
WIRE 1184 912 1184 576
WIRE 1280 912 1184 912
WIRE 1440 912 1344 912
WIRE 1504 912 1440 912
WIRE 1712 928 1712 848
WIRE 1712 928 1568 928
WIRE 1184 992 1184 912
WIRE 1440 1024 1440 912
WIRE 1456 1024 1440 1024
WIRE 1568 1024 1520 1024
WIRE 1744 1024 1744 896
WIRE 1744 1024 1648 1024
WIRE 1184 1136 1184 1072
FLAG 352 576 0
FLAG 512 592 0
FLAG -16 608 0
FLAG -480 528 0
FLAG -384 368 V+
FLAG 288 384 V+
FLAG 272 176 V+
FLAG 80 176 V+
FLAG -384 560 V-
FLAG 288 320 V-
FLAG 288 240 V-
FLAG 80 240 V-
FLAG 800 208 out
FLAG 688 448 0
FLAG 1536 608 V+
FLAG 1600 32 V+
FLAG 1280 176 V+
FLAG 1536 544 V-
FLAG 1600 400 V-
FLAG 1280 240 V-
FLAG 2240 208 out2
FLAG 2192 512 0
FLAG 2096 512 0
FLAG 1536 880 V+
FLAG 1536 944 V-
FLAG 2768 432 0
FLAG 2768 208 out2
FLAG 1184 1216 0
SYMBOL OpAmps\\LT1010 288 144 R0
SYMATTR InstName U1
SYMBOL OpAmps\\LT118A 80 208 R0
SYMATTR InstName U2
SYMBOL OpAmps\\LT118A 288 352 R180
SYMATTR InstName U3
SYMBOL cap 160 112 R0
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL res 336 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 2k
SYMBOL res 0 528 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 2k
SYMBOL diode 16 368 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N914
SYMBOL diode 176 400 R0
WINDOW 3 -22 91 Left 2
SYMATTR Value 1N914
SYMATTR InstName D2
SYMBOL cap 80 400 R0
SYMATTR InstName C2
SYMATTR Value 10p
SYMBOL res 496 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL res 336 224 R0
SYMATTR InstName R4
SYMATTR Value 2k
SYMBOL res 496 224 R0
SYMATTR InstName R5
SYMATTR Value 2k
SYMBOL res 496 384 R0
SYMATTR InstName R6
SYMATTR Value 99.8k
SYMBOL res 336 480 R0
SYMATTR InstName R7
SYMATTR Value 99.8k
SYMBOL voltage 512 496 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 0.5
SYMBOL voltage -16 512 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -384 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 15
SYMBOL voltage -384 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 15
SYMBOL res 672 272 R0
SYMATTR InstName R8
SYMATTR Value R=if(time>5m& time<10m,100k,2)
SYMBOL cap 1376 80 R0
SYMATTR InstName C5
SYMATTR Value 1n
SYMBOL res 1584 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 2k
SYMBOL res 1200 1088 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 2k
SYMBOL diode 1232 592 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL diode 1424 592 R0
WINDOW 3 -9 58 Left 2
SYMATTR Value 1N4148
SYMATTR InstName D6
SYMBOL cap 1328 624 R0
WINDOW 3 35 34 Left 2
SYMATTR Value 10p
SYMATTR InstName C6
SYMBOL res 1744 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value 2
SYMBOL res 1648 432 R0
SYMATTR InstName R18
SYMATTR Value 2k
SYMBOL voltage 1888 432 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 57 Left 2
SYMATTR Value 0.001
SYMATTR InstName V7
SYMBOL res 2176 256 R0
SYMATTR InstName R22
SYMATTR Value R=if(time>5m& time<10m,1k,2)
SYMBOL cap 2080 288 R0
SYMATTR InstName C4
SYMATTR Value 10n
SYMBOL diode 1344 896 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N914
SYMBOL voltage 1936 608 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 57 Left 2
SYMATTR Value 0.15
SYMATTR InstName V6
SYMBOL voltage 2768 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value PULSE(10 4 10m 100u 100u 10m)
SYMBOL res 2752 240 R0
SYMATTR InstName R10
SYMATTR Value 10
SYMBOL res 1696 752 R0
SYMATTR InstName R12
SYMATTR Value 2k
SYMBOL voltage 1184 1120 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 3
SYMBOL cap 1520 1008 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 10p
SYMBOL res 1664 1008 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 1920 880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL AutoGenerated\\OPA192 1504 912 R180
WINDOW 3 -94 44 Top 2
WINDOW 0 4 63 Bottom 2
SYMATTR InstName U4
SYMBOL AutoGenerated\\OPA192 1504 576 M0
WINDOW 3 -47 -91 Top 2
WINDOW 0 23 -66 Bottom 2
SYMATTR InstName U5
SYMBOL AutoGenerated\\OPA189 1312 208 M180
WINDOW 3 -43 60 Top 2
SYMATTR InstName U6
SYMBOL npn 1536 80 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL pnp 1536 336 M180
WINDOW 0 68 31 Left 2
WINDOW 3 55 61 Left 2
SYMATTR InstName Q2
SYMATTR Value 2N2907
SYMBOL res 1584 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 200
TEXT -504 648 Left 2 !.tran 0.015
TEXT 1880 776 VLeft 2 ;Max sink current
TEXT 1840 320 Left 2 ;Iset
TEXT 1112 1120 Left 2 ;Vset
TEXT 1776 136 Left 2 ;SHUNT
TEXT 2288 296 Left 2 ;LOAD
TEXT 2064 400 VLeft 2 ;CAP 0p-100u
TEXT 1376 456 Left 4 ;CC control
TEXT 1376 792 Left 4 ;sink control
TEXT 2664 136 Left 4 ;for testing sinking
