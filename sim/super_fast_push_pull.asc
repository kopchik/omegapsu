Version 4
SHEET 1 8456 1444
WIRE 96 -288 96 -304
WIRE -256 -208 -320 -208
WIRE -144 -208 -176 -208
WIRE 352 -176 352 -208
WIRE 224 -160 224 -208
WIRE 912 -128 864 -128
WIRE -320 -112 -320 -208
WIRE -320 -112 -384 -112
WIRE -240 -112 -320 -112
WIRE -208 -112 -240 -112
WIRE -80 -112 -80 -208
WIRE -80 -112 -128 -112
WIRE -64 -112 -80 -112
WIRE 96 -112 96 -208
WIRE 144 -112 96 -112
WIRE 160 -112 144 -112
WIRE 144 -80 144 -112
WIRE 176 -80 144 -80
WIRE 96 -64 96 -112
WIRE 96 -64 0 -64
WIRE -240 -48 -240 -112
WIRE 96 -48 96 -64
WIRE 352 -48 352 -96
WIRE 1392 -48 1328 -48
WIRE 1328 -32 1328 -48
WIRE 816 -16 816 -48
WIRE 864 -16 864 -32
WIRE 864 -16 816 -16
WIRE 912 -16 912 -128
WIRE 912 -16 864 -16
WIRE 1280 -16 1232 -16
WIRE 0 0 0 -64
WIRE 224 0 224 -64
WIRE 256 0 224 0
WIRE 288 0 256 0
WIRE 256 32 256 0
WIRE 864 32 864 -16
WIRE 96 48 96 32
WIRE 592 48 496 48
WIRE 752 48 656 48
WIRE 1232 64 1232 -16
WIRE 1328 64 1232 64
WIRE 1392 64 1392 -48
WIRE 1392 64 1328 64
WIRE -240 80 -240 32
WIRE 352 80 352 48
WIRE 448 80 352 80
WIRE 352 96 352 80
WIRE 1328 128 1328 64
WIRE 0 144 0 64
WIRE 96 144 96 128
WIRE 96 144 0 144
WIRE 448 176 448 144
WIRE 448 176 352 176
WIRE -384 192 -384 -112
WIRE -336 192 -384 192
WIRE -240 208 -240 144
WIRE -240 208 -272 208
WIRE -160 208 -240 208
WIRE 96 208 96 144
WIRE 96 208 -80 208
WIRE 352 208 352 176
WIRE 448 208 352 208
WIRE 496 208 496 48
WIRE 496 208 448 208
WIRE 560 208 496 208
WIRE 592 208 560 208
WIRE 736 208 672 208
WIRE 752 208 752 48
WIRE 752 208 736 208
WIRE 816 208 752 208
WIRE 976 208 816 208
WIRE 1008 208 976 208
WIRE -336 224 -384 224
WIRE 352 256 352 208
WIRE 352 256 288 256
WIRE 352 272 352 256
WIRE 560 272 560 208
WIRE 288 288 288 256
WIRE 976 288 976 208
WIRE 1824 304 1824 256
WIRE 256 352 256 112
WIRE 352 352 288 352
WIRE -544 368 -544 336
WIRE 352 416 352 352
WIRE 1824 432 1824 384
WIRE 736 448 736 208
WIRE -704 464 -704 448
WIRE -704 464 -800 464
WIRE 256 464 256 432
WIRE 256 464 208 464
WIRE 288 464 256 464
WIRE 1344 464 1344 336
WIRE -704 480 -704 464
WIRE 96 480 96 208
WIRE 160 480 96 480
WIRE 96 512 96 480
WIRE 144 512 96 512
WIRE 352 512 304 512
WIRE 976 512 976 352
WIRE -800 528 -800 464
WIRE 352 528 352 512
WIRE 304 544 304 512
WIRE 1824 576 1824 512
WIRE 208 608 208 560
WIRE 304 624 304 608
WIRE 352 624 352 608
WIRE 160 736 96 736
WIRE 304 736 224 736
WIRE 320 736 304 736
WIRE 448 736 448 288
WIRE 448 736 400 736
WIRE 1824 784 1824 656
WIRE 112 800 -144 800
WIRE 192 800 176 800
WIRE 304 800 304 736
WIRE 304 800 272 800
WIRE 816 816 816 208
WIRE 208 880 208 864
WIRE 304 912 304 800
WIRE 304 912 256 912
WIRE -144 928 -144 800
WIRE -48 928 -144 928
WIRE 96 928 96 736
WIRE 96 928 16 928
WIRE 144 928 96 928
WIRE 736 944 736 528
WIRE 736 944 256 944
WIRE 1088 992 1088 928
WIRE 64 1104 -32 1104
WIRE 208 1104 128 1104
WIRE -384 1168 -384 224
WIRE 0 1184 -256 1184
WIRE 96 1184 64 1184
WIRE 208 1184 208 1104
WIRE 208 1184 176 1184
WIRE 1088 1232 1088 1072
WIRE 1552 1264 1552 1104
WIRE -384 1280 -384 1248
WIRE 208 1296 208 1184
WIRE 208 1296 128 1296
WIRE 304 1296 208 1296
WIRE 448 1296 448 736
WIRE 448 1296 384 1296
WIRE -256 1312 -256 1184
WIRE -160 1312 -256 1312
WIRE -32 1312 -32 1104
WIRE -32 1312 -96 1312
WIRE 16 1312 -32 1312
WIRE 816 1328 816 896
WIRE 816 1328 128 1328
WIRE 80 1376 80 1360
WIRE 0 0 0 0
FLAG -800 528 0
FLAG -704 368 V+
FLAG -704 560 V-
FLAG 240 992 V+
FLAG -304 176 V+
FLAG 240 864 V-
FLAG -304 240 V-
FLAG 1008 208 out2
FLAG 1088 1232 0
FLAG 976 512 0
FLAG 112 1248 V+
FLAG 112 1376 V-
FLAG 1824 784 0
FLAG -384 1360 0
FLAG 1344 336 out2
FLAG 560 352 V-
FLAG -64 -112 out2
FLAG 352 624 0
FLAG 208 608 V-
FLAG -544 336 Vpower
FLAG -544 448 0
FLAG 352 -208 Vpower
FLAG 224 -208 V+
FLAG 80 1376 0
FLAG 208 864 0
FLAG 96 -304 V+
FLAG 1552 1264 0
FLAG 1344 544 0
FLAG 864 32 0
FLAG 1328 128 0
FLAG 304 624 0
DATAFLAG 896 208 ""
SYMBOL voltage -704 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL voltage -704 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 15
SYMBOL cap -256 80 R0
SYMATTR InstName C5
SYMATTR Value 1n
SYMBOL res -112 -128 R90
WINDOW 0 -16 53 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL res -368 1264 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL diode 160 752 R270
WINDOW 0 35 -2 VTop 2
WINDOW 3 57 92 VBottom 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL schottky -48 944 R270
WINDOW 3 0 32 VBottom 2
WINDOW 0 32 32 VTop 2
SYMATTR Value 1N5817
SYMATTR InstName D6
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 112 816 R270
WINDOW 3 0 32 VBottom 2
WINDOW 0 32 32 VTop 2
SYMATTR Value 0p
SYMATTR InstName C6
SYMBOL res 576 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value 0.1
SYMBOL res 416 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 2k
SYMBOL voltage 736 544 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 57 Left 2
SYMATTR Value 0.5
SYMATTR InstName V7
SYMBOL res 1072 976 R0
SYMATTR InstName R22
SYMATTR Value R=if(time>1m& time<3m,1MEG,0.5)
SYMBOL cap 960 288 R0
SYMATTR InstName C4
SYMATTR Value 1µ
SYMATTR SpiceLine Rser=0.1
SYMBOL voltage 816 800 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 57 Left 2
SYMATTR Value 0.1
SYMATTR InstName V6
SYMBOL voltage 1824 416 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value PWL(0 0 +1m 0 +100n 1m +2m 1m +100n 100m +2m 100m +100n 1000m +2m 1000m +100n 100m +2m 100m +100n 1m +2m 1m)
SYMBOL res 1808 288 R0
SYMATTR InstName R10
SYMATTR Value 1
SYMBOL res 400 1280 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 2k
SYMBOL voltage -384 1264 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 1
SYMBOL cap 64 1168 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 0p
SYMBOL res 192 1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1
SYMBOL OpAmps\\LT1468 -304 144 R0
SYMATTR InstName U2
SYMBOL res 288 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 35 64 VTop 2
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL diode 128 1088 R90
WINDOW 0 -10 67 VBottom 2
WINDOW 3 -39 2 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL schottky -96 1296 R90
WINDOW 3 32 32 VTop 2
WINDOW 0 0 32 VBottom 2
SYMATTR Value 1N5817
SYMATTR InstName D2
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -64 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL voltage 1824 560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL current 560 272 R0
WINDOW 3 24 136 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 108 Left 2
SYMATTR Value 0m
SYMATTR SpiceLine load
SYMATTR InstName I1
SYMBOL res 432 192 R0
SYMATTR InstName R3
SYMATTR Value 0
SYMBOL npn 288 -48 R0
SYMATTR InstName Q1
SYMATTR Value ZTX1048A
SYMBOL nmos 176 -160 R0
SYMATTR InstName M1
SYMATTR Value BSS123
SYMBOL pnp 288 512 M180
WINDOW 0 61 36 Left 2
WINDOW 3 -48 -33 Left 2
SYMATTR InstName Q2
SYMATTR Value D45H11
SYMBOL pmos 160 560 M180
SYMATTR InstName M2
SYMATTR Value BSS84
SYMBOL voltage 96 32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 4.75
SYMBOL voltage -544 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value 15
SYMBOL res -256 -64 R0
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL OpAmps\\LT6018 208 928 R180
SYMATTR InstName U1
SYMBOL OpAmps\\LT6018 80 1312 M0
SYMATTR InstName U3
SYMBOL current 96 -288 R0
WINDOW 0 -50 -1 Left 2
WINDOW 3 -78 64 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I2
SYMATTR Value 0.1m
SYMBOL res 1536 1008 R0
SYMATTR InstName R6
SYMATTR Value R=if(time>1m& time<3m,1MEG,20)
SYMBOL current 1344 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 108 Left 2
SYMATTR SpiceLine load
SYMATTR InstName I3
SYMATTR Value PULSE(1m 2 0.05m 100n 100n 0.1m 5m)
SYMBOL cap -80 -224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 100p
SYMBOL res -160 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1Meg
SYMBOL npn 1728 -144 R0
SYMATTR InstName Q3
SYMATTR Value BC847C
SYMBOL res 240 16 R0
SYMATTR InstName R7
SYMATTR Value 100
SYMBOL res 240 336 R0
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL pnp 1440 -128 M180
SYMATTR InstName Q4
SYMATTR Value BC857C
SYMBOL cap 656 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1p
SYMBOL res 336 512 R0
SYMATTR InstName R9
SYMATTR Value 0.5
SYMBOL res 336 80 R0
SYMATTR InstName R13
SYMATTR Value 0.01
SYMBOL res 336 -192 R0
SYMATTR InstName R19
SYMATTR Value 0.1
SYMBOL cap 272 288 R0
SYMATTR InstName C7
SYMATTR Value 10µ
SYMBOL res 336 256 R0
SYMATTR InstName R16
SYMATTR Value 0.01
SYMBOL cap 432 80 R0
SYMATTR InstName C8
SYMATTR Value 20µ
SYMBOL res 80 -64 R0
SYMATTR InstName R20
SYMATTR Value 3k
SYMBOL cap -16 0 R0
SYMATTR InstName C9
SYMATTR Value 1µ
SYMBOL cap 288 544 R0
SYMATTR InstName C10
SYMATTR Value 10µ
TEXT -824 648 Left 2 !.tran 0.8m
TEXT 768 968 VLeft 2 ;Max sink current
TEXT 704 368 VRight 2 ;max source current
TEXT -376 1264 Left 2 ;Vset
TEXT 592 128 Left 2 ;SHUNT
TEXT 1192 192 Left 4 ;LOAD
TEXT 928 392 VLeft 2 ;CAP 0p-100u
TEXT 376 816 Left 4 ;CC control
TEXT 264 1152 Left 4 ;sink control
TEXT 1704 184 Left 4 ;test sinking
TEXT -856 688 Left 2 !;.step param CAP list 700p 1n 1.3n
TEXT -864 736 Left 2 !;.step param RES list 500 1k 2k
TEXT -856 792 Left 2 !;.step param IBIAS list 0.1m 0.5m 1m
TEXT -864 872 Left 2 !;.step param VBIAS list 2.5 3 3.5 4 4.5
TEXT -864 920 Left 2 !;.step param PRELOAD list 10u 1m 10m 20m 50m
TEXT -960 1080 Left 2 !;.step param VBIAS list 0 0.6 1 1.1 1.2 1.5
TEXT -848 1000 Left 2 !.temp 60
TEXT -872 960 Left 2 !;.step param TEMP list 15 20 30 60 90 110
