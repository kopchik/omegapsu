Version 4
SHEET 1 2224 1084
WIRE -272 -144 -304 -144
WIRE 1040 -144 400 -144
WIRE 1136 -144 1040 -144
WIRE 1616 -144 1232 -144
WIRE 1040 -80 1040 -144
WIRE 0 -64 -96 -64
WIRE 160 -64 80 -64
WIRE 432 -64 160 -64
WIRE 560 -64 512 -64
WIRE 160 -16 160 -64
WIRE 192 -16 160 -16
WIRE 304 -16 256 -16
WIRE 400 -16 368 -16
WIRE 560 -16 560 -64
WIRE -272 16 -304 16
WIRE 1040 32 1040 0
WIRE 1184 32 1184 -80
WIRE 1184 32 1040 32
WIRE 288 80 288 48
WIRE 160 96 160 -16
WIRE 256 96 160 96
WIRE 288 96 288 80
WIRE 400 112 400 -16
WIRE 400 112 320 112
WIRE 448 112 400 112
WIRE 560 112 560 48
WIRE 560 112 512 112
WIRE 672 112 560 112
WIRE 944 112 736 112
WIRE 1184 112 1184 32
WIRE 1184 112 944 112
WIRE 256 128 -112 128
WIRE 288 144 288 128
WIRE 288 160 288 144
WIRE -432 192 -432 176
WIRE -112 192 -112 128
WIRE 944 224 944 112
WIRE -432 304 -432 272
WIRE -368 304 -432 304
WIRE -112 320 -112 272
WIRE -432 336 -432 304
WIRE -368 336 -368 304
WIRE 608 336 560 336
WIRE 752 336 688 336
WIRE 944 336 944 288
WIRE 944 336 816 336
WIRE -432 432 -432 416
WIRE 448 432 416 432
WIRE 560 432 560 336
WIRE 560 432 528 432
WIRE 736 432 560 432
WIRE 768 432 768 416
WIRE 944 448 944 336
WIRE 944 448 800 448
WIRE 736 464 640 464
WIRE 768 480 768 464
WIRE 640 544 640 464
WIRE 1616 640 1616 -144
WIRE 1648 640 1616 640
WIRE 640 672 640 624
WIRE 1616 672 1616 640
WIRE 1712 672 1616 672
WIRE 1616 688 1616 672
WIRE 1712 704 1712 672
WIRE 1616 784 1616 768
WIRE 1712 784 1712 768
WIRE 1712 784 1616 784
WIRE 1616 832 1616 784
WIRE 1632 832 1616 832
WIRE 1616 864 1616 832
WIRE 1616 992 1616 944
FLAG -368 336 0
FLAG -432 176 +V
FLAG 288 160 +V
FLAG 400 -144 +V
FLAG -112 320 0
FLAG 1616 992 0
FLAG -432 432 -V
FLAG 288 48 -V
FLAG 768 416 -V
FLAG 1648 640 out
IOPIN 1648 640 Out
FLAG -304 -144 out
IOPIN -304 -144 Out
FLAG -240 32 -V
FLAG 768 480 +V
FLAG -160 0 0
FLAG 1632 832 out-
IOPIN 1632 832 Out
FLAG -304 16 out-
IOPIN -304 16 Out
FLAG 640 672 0
FLAG 416 432 out-
IOPIN 416 432 Out
FLAG -240 -160 +V
SYMBOL npn 1136 -80 R270
SYMATTR InstName Q1
SYMATTR Value ZTX1048A
SYMBOL voltage -432 176 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 25V
SYMBOL Misc\\EuropeanResistor 1632 960 R180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R9
SYMATTR Value 1R
SYMBOL voltage -112 176 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 1
SYMBOL current 1040 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 108 Left 2
SYMATTR InstName I1
SYMATTR Value 10m
SYMBOL Misc\\EuropeanResistor 1632 672 M0
SYMATTR InstName RL
SYMATTR Value r=if(time>0.3m&time<0.6m,10,1k)
SYMBOL voltage -432 320 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3V
SYMBOL diode 256 0 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL cap 576 48 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value 10nF
SYMBOL Misc\\EuropeanResistor 528 -80 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL diode 1312 496 M0
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL cap 1696 704 R0
SYMATTR InstName C4
SYMATTR Value 0.1µ
SYMBOL schottky 960 224 M0
SYMATTR InstName D7
SYMATTR Value RBR30NS30A
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 96 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 36 75 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL voltage 640 528 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 0.1
SYMBOL schottky 512 128 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value RBR30NS30A
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 752 320 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 50p
SYMBOL Misc\\EuropeanResistor 592 320 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL Misc\\EuropeanResistor 432 416 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL diode 368 0 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL OpAmps\\AD8421 -240 -64 R0
SYMATTR InstName U3
SYMBOL OpAmps\\LT1037 288 48 R0
SYMATTR InstName U4
SYMBOL OpAmps\\LT1037 768 384 R0
SYMATTR InstName U2
SYMBOL diode 736 96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4148
TEXT -144 992 Left 2 !.tran 10m
